---
import Layout from "../../layouts/Layout.astro";

const exercises = [
  { id: 11, title: 'Buscador en Tiempo Real',    category: 'Búsqueda',    icon: '⌕'  },
  { id: 12, title: 'Cambiador de Texto',          category: 'Eventos',     icon: '↺'  },
  { id: 13, title: 'Tecla Presionada',            category: 'Teclado',     icon: '⌨'  },
  { id: 14, title: 'Detector de Enter',           category: 'Teclado',     icon: '↵'  },
  { id: 15, title: 'Enlace con Prevención',       category: 'Eventos',     icon: '⊘'  },
  { id: 16, title: 'Texto Interactivo',           category: 'Mouse',       icon: '◎'  },
  { id: 17, title: 'Formulario con Validación',   category: 'Formularios', icon: '✓'  },
  { id: 18, title: 'Detector de Doble Clic',      category: 'Mouse',       icon: '⚡' },
  { id: 19, title: 'Campo Enfocado',              category: 'Foco',        icon: '◉'  },
  { id: 20, title: 'Eco en Tiempo Real',          category: 'Input',       icon: '≋'  },
];

const categoryColors: Record<string, string> = {
  'Búsqueda':    '#64dcff',
  'Eventos':     '#e8ff47',
  'Teclado':     '#ff9f47',
  'Mouse':       '#c084fc',
  'Formularios': '#4ade80',
  'Foco':        '#fb7185',
  'Input':       '#38bdf8',
};
---

<Layout title="Ejercicios 11–20 · JS Interactivo">
  <div class="main-wrapper">

    <!-- Ambient background blobs -->
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
    <div class="blob blob-3"></div>

    <div class="content-shell">

      <!-- ── HEADER ── -->
      <header class="site-header">
       
        <h1 class="site-title">
          <span class="title-num">11</span>
          <span class="title-dash">—</span>
          <span class="title-num">20</span>
        </h1>

      </header>

      <!-- ── EXERCISE GRID ── -->
      <div class="ex-grid">
        {exercises.map((ex, i) => (
          <button
            class="ex-card"
            data-id={ex.id}
            style={`--accent: ${categoryColors[ex.category] ?? '#e8ff47'}; --delay: ${i * 60}ms`}
          >
            <div class="card-glow"></div>
            <div class="card-inner">
              <div class="card-top">
                <span class="card-num">#{String(ex.id).padStart(2,'0')}</span>
                <span class="card-icon">{ex.icon}</span>
              </div>
              <h3 class="card-title">{ex.title}</h3>
              <div class="card-footer">
                <span class="card-badge">{ex.category}</span>
                <span class="card-arrow">→</span>
              </div>
            </div>
          </button>
        ))}
      </div>

    </div>
  </div>

  <!-- ── MODAL ── -->
  <div
    id="modal"
    class="modal-overlay hidden"
  >
    <div class="modal-box">

      <!-- Header strip -->
      <div class="modal-header" id="modal-header-strip">
        <div class="modal-header-left">
          <span class="modal-eyebrow" id="modal-number"></span>
          <h2 class="modal-title" id="modal-title"></h2>
        </div>
        <button id="close-btn" class="modal-close" aria-label="Cerrar">
          <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
            <path d="M1 1l12 12M13 1L1 13" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <!-- Body -->
      <div class="modal-body" id="modal-body">

        <!-- Ex 11 -->
        <div class="ex-panel hidden" data-ex="11">
          <p class="ex-desc">Filtra la lista de frutas mientras escribes (búsqueda case-insensitive).</p>
          <input id="fruit-input" type="text" placeholder="Buscar fruta…" class="ex-input" />
          <ul id="fruit-list" class="fruit-grid">
            {['Manzana','Banana','Naranja','Uva','Sandía','Melón','Fresa','Kiwi'].map(f => (
              <li class="fruit-chip">{f}</li>
            ))}
          </ul>
        </div>

        <!-- Ex 12 -->
        <div class="ex-panel hidden" data-ex="12">
          <p class="ex-desc">Al hacer clic el texto del botón alterna entre dos estados.</p>
          <button id="toggle-btn" class="action-btn">Haz clic aquí</button>
        </div>

        <!-- Ex 13 -->
        <div class="ex-panel hidden" data-ex="13">
          <p class="ex-desc">Mientras escribes se muestra en tiempo real la última tecla pulsada.</p>
          <input id="key-input" type="text" placeholder="Escribe algo…" class="ex-input mb-3" />
          <div class="key-display" id="key-msg">
            <span class="key-label">Tecla</span>
            <span class="key-value" id="key-value">—</span>
          </div>
        </div>

        <!-- Ex 14 -->
        <div class="ex-panel hidden" data-ex="14">
          <p class="ex-desc">Escribe algo y presiona Enter para que aparezca abajo.</p>
          <input id="enter-input" type="text" placeholder="Escribe y presiona Enter…" class="ex-input mb-3" />
          <p id="enter-output" class="ex-output"></p>
        </div>

        <!-- Ex 15 -->
        <div class="ex-panel hidden" data-ex="15">
          <p class="ex-desc">El enlace usa <code>preventDefault()</code> para bloquear la navegación.</p>
          <a id="magic-link" href="https://example.com" class="magic-anchor">
            <span>Haz clic aquí</span>
            <span class="anchor-pill">bloqueado</span>
          </a>
          <p id="link-msg" class="ex-output mt-3"></p>
        </div>

        <!-- Ex 16 -->
        <div class="ex-panel hidden" data-ex="16">
          <p class="ex-desc">El texto cambia a rojo al pasar el cursor encima.</p>
          <span id="hover-text" class="hover-chip">
            Pasa el mouse sobre este texto
          </span>
        </div>

        <!-- Ex 17 -->
        <div class="ex-panel hidden" data-ex="17">
          <p class="ex-desc">Valida que ambos campos estén llenos antes de enviar.</p>
          <form id="contact-form" class="ex-form">
            <div class="form-field">
              <label class="form-label">Nombre</label>
              <input id="fname" type="text" placeholder="Tu nombre" class="ex-input" />
            </div>
            <div class="form-field">
              <label class="form-label">Email</label>
              <input id="femail" type="email" placeholder="tu@email.com" class="ex-input" />
            </div>
            <button type="submit" class="action-btn submit-btn">Enviar →</button>
          </form>
          <p id="form-msg" class="ex-output mt-3"></p>
        </div>

        <!-- Ex 18 -->
        <div class="ex-panel hidden" data-ex="18">
          <p class="ex-desc">El botón solo reacciona al doble clic.</p>
          <button id="dbl-btn" class="action-btn ghost-btn">Haz doble clic aquí</button>
          <p id="dbl-msg" class="ex-output mt-3"></p>
        </div>

        <!-- Ex 19 -->
        <div class="ex-panel hidden" data-ex="19">
          <p class="ex-desc">El mensaje cambia según si el campo tiene foco o no.</p>
          <input id="focus-input" type="text" placeholder="Haz clic aquí…" class="ex-input mb-3" />
          <div class="focus-indicator" id="focus-indicator">
            <span class="focus-dot" id="focus-dot"></span>
            <span id="focus-msg">Campo inactivo</span>
          </div>
        </div>

        <!-- Ex 20 -->
        <div class="ex-panel hidden" data-ex="20">
          <p class="ex-desc">El área de abajo replica en tiempo real lo que escribes.</p>
          <input id="echo-input" type="text" placeholder="Escribe aquí…" class="ex-input mb-3" />
          <div id="echo-output" class="echo-box"></div>
        </div>

      </div>
    </div>
  </div>
</Layout>

<!-- ─────────────────────────── STYLES ─────────────────────────── -->
<style>
  /* ── Fonts ── */
  @import url('https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;0,500;1,400&family=Syne:wght@700;800&display=swap');

  /* ── Root tokens ── */
  :root {
    --bg:       #080c14;
    --surface:  #0d1220;
    --card-bg:  #111827;
    --border:   rgba(255,255,255,0.07);
    --text:     rgba(255,255,255,0.85);
    --muted:    rgba(255,255,255,0.35);
    --accent:   #e8ff47;
    --blue:     #64dcff;
    --mono:     'DM Mono', monospace;
    --display:  'Syne', sans-serif;
  }

  /* ── Wrapper ── */
  .main-wrapper {
    min-height: 100vh;
    background: var(--bg);
    position: relative;
    overflow: hidden;
  }

  /* ── Ambient blobs ── */
  .blob {
    position: fixed;
    border-radius: 50%;
    filter: blur(120px);
    pointer-events: none;
    z-index: 0;
    opacity: 0.18;
  }
  .blob-1 {
    width: 600px; height: 600px;
    background: radial-gradient(circle, #1a3aff 0%, transparent 70%);
    top: -200px; left: -200px;
    animation: drift1 18s ease-in-out infinite alternate;
  }
  .blob-2 {
    width: 500px; height: 500px;
    background: radial-gradient(circle, #e8ff47 0%, transparent 70%);
    bottom: -100px; right: -150px;
    animation: drift2 22s ease-in-out infinite alternate;
  }
  .blob-3 {
    width: 350px; height: 350px;
    background: radial-gradient(circle, #64dcff 0%, transparent 70%);
    top: 40%; left: 50%;
    transform: translate(-50%,-50%);
    animation: drift3 28s ease-in-out infinite alternate;
  }
  @keyframes drift1 { to { transform: translate(60px, 80px) scale(1.1); } }
  @keyframes drift2 { to { transform: translate(-40px, -60px) scale(1.15); } }
  @keyframes drift3 { to { transform: translate(-30%, -60%) scale(0.9); } }

  /* ── Content shell ── */
  .content-shell {
    position: relative;
    z-index: 1;
    max-width: 1100px;
    margin: 0 auto;
    padding: 4rem 1.5rem 6rem;
  }

  /* ── Header ── */
  .site-header {
    text-align: center;
    margin-bottom: 3rem;
    animation: fadeUp 0.7s ease both;
  }
  .header-eyebrow {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 1.2rem;
  }
  .eyebrow-line {
    display: block;
    width: 40px;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--muted), transparent);
  }
  .eyebrow-text {
    font-family: var(--mono);
    font-size: 0.68rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--muted);
  }
  .site-title {
    font-family: var(--display);
    font-size: clamp(4.5rem, 12vw, 9rem);
    font-weight: 800;
    line-height: 0.9;
    letter-spacing: -0.04em;
    color: var(--text);
    display: flex;
    align-items: baseline;
    justify-content: center;
    gap: 0.2em;
    margin: 0;
  }
  .title-num {
    background: linear-gradient(135deg, #fff 30%, rgba(255,255,255,0.4));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .title-dash {
    color: var(--accent);
    -webkit-text-fill-color: var(--accent);
    font-size: 0.55em;
    margin: 0 0.1em;
  }
  .site-subtitle {
    font-family: var(--mono);
    font-size: 0.75rem;
    color: var(--muted);
    letter-spacing: 0.15em;
    text-transform: uppercase;
    margin-top: 0.8rem;
  }

  /* ── Stats bar ── */
  .stats-bar {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 2.5rem;
    animation: fadeUp 0.7s 0.1s ease both;
  }
  .stat-pill {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    background: rgba(255,255,255,0.04);
    border: 1px solid var(--border);
    border-radius: 100px;
    padding: 0.3rem 0.8rem;
    font-family: var(--mono);
    font-size: 0.68rem;
    color: var(--muted);
  }
  .stat-dot {
    width: 5px; height: 5px;
    border-radius: 50%;
    display: inline-block;
  }
  .stat-divider {
    width: 1px; height: 16px;
    background: var(--border);
  }

  /* ── Exercise grid ── */
  .ex-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 1rem;
  }

  /* ── Card ── */
  .ex-card {
    --accent: #e8ff47;
    position: relative;
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 1.4rem;
    text-align: left;
    cursor: pointer;
    overflow: hidden;
    transition: transform 0.25s cubic-bezier(0.34,1.56,0.64,1),
                border-color 0.2s,
                box-shadow 0.2s;
    animation: cardIn 0.5s var(--delay, 0ms) ease both;
  }
  .ex-card:hover {
    transform: translateY(-4px) scale(1.02);
    border-color: color-mix(in srgb, var(--accent) 40%, transparent);
    box-shadow: 0 8px 32px -8px color-mix(in srgb, var(--accent) 25%, transparent),
                0 0 0 1px color-mix(in srgb, var(--accent) 15%, transparent);
  }
  .ex-card:active { transform: translateY(-1px) scale(1.00); }

  /* Glow sweep on hover */
  .card-glow {
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: radial-gradient(ellipse 80% 60% at 50% 0%, color-mix(in srgb, var(--accent) 12%, transparent), transparent 70%);
    opacity: 0;
    transition: opacity 0.3s;
    pointer-events: none;
  }
  .ex-card:hover .card-glow { opacity: 1; }

  .card-inner { position: relative; z-index: 1; }

  .card-top {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 0.85rem;
  }
  .card-num {
    font-family: var(--mono);
    font-size: 0.62rem;
    color: color-mix(in srgb, var(--accent) 80%, transparent);
    letter-spacing: 0.06em;
    background: color-mix(in srgb, var(--accent) 8%, transparent);
    border: 1px solid color-mix(in srgb, var(--accent) 15%, transparent);
    border-radius: 4px;
    padding: 0.1rem 0.4rem;
  }
  .card-icon {
    font-size: 1.1rem;
    opacity: 0.5;
    transition: opacity 0.2s, transform 0.2s;
  }
  .ex-card:hover .card-icon { opacity: 1; transform: scale(1.15); }

  .card-title {
    font-family: var(--mono);
    font-size: 0.82rem;
    font-weight: 500;
    color: var(--text);
    line-height: 1.4;
    margin: 0 0 1.2rem;
  }

  .card-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .card-badge {
    font-family: var(--mono);
    font-size: 0.6rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: color-mix(in srgb, var(--accent) 90%, white);
    opacity: 0.65;
  }
  .card-arrow {
    font-size: 0.75rem;
    color: var(--muted);
    transition: transform 0.2s, color 0.2s;
  }
  .ex-card:hover .card-arrow {
    transform: translateX(3px);
    color: var(--accent);
  }

  /* ── Modal ── */
  .modal-overlay {
    position: fixed;
    inset: 0;
    z-index: 100;
    background: rgba(4,7,14,0.9);
    backdrop-filter: blur(16px) saturate(0.8);
    align-items: center;
    justify-content: center;
    padding: 1rem;
  }
  .modal-overlay:not(.hidden) { display: flex; }

  .modal-box {
    width: 100%;
    max-width: 520px;
    background: linear-gradient(160deg, #111927 0%, #0a0f1c 100%);
    border: 1px solid rgba(255,255,255,0.09);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 32px 80px -20px rgba(0,0,0,0.7),
                0 0 0 1px rgba(255,255,255,0.04);
    animation: modalIn 0.35s cubic-bezier(0.34,1.4,0.64,1) both;
  }

  @keyframes modalIn {
    from { opacity:0; transform: scale(0.94) translateY(12px); }
    to   { opacity:1; transform: scale(1)    translateY(0);    }
  }

  .modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.1rem 1.4rem;
    border-bottom: 1px solid rgba(255,255,255,0.06);
    background: rgba(255,255,255,0.02);
  }
  .modal-eyebrow {
    font-family: var(--mono);
    font-size: 0.62rem;
    letter-spacing: 0.1em;
    color: var(--blue);
    text-transform: uppercase;
    display: block;
    margin-bottom: 0.15rem;
  }
  .modal-title {
    font-family: var(--mono);
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--text);
    margin: 0;
  }
  .modal-close {
    width: 30px; height: 30px;
    border-radius: 8px;
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.07);
    color: var(--muted);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: background 0.15s, color 0.15s;
    flex-shrink: 0;
  }
  .modal-close:hover {
    background: rgba(255,80,80,0.12);
    color: #ff6b6b;
    border-color: rgba(255,80,80,0.2);
  }

  .modal-body { padding: 1.5rem 1.4rem; }

  /* ── Panel shared ── */
  .ex-panel.hidden { display: none; }
  .ex-desc {
    font-family: var(--mono);
    font-size: 0.72rem;
    color: var(--muted);
    line-height: 1.6;
    margin-bottom: 1.1rem;
  }
  .ex-desc code {
    color: var(--blue);
    background: rgba(100,220,255,0.07);
    border-radius: 4px;
    padding: 0 0.3em;
  }

  /* Inputs */
  .ex-input {
    width: 100%;
    background: rgba(0,0,0,0.35);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 10px;
    color: var(--text);
    font-family: var(--mono);
    font-size: 0.78rem;
    padding: 0.55rem 0.9rem;
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
    display: block;
  }
  .ex-input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 12%, transparent);
  }
  .ex-input::placeholder { color: rgba(255,255,255,0.2); }
  .mb-3 { margin-bottom: 0.75rem; }
  .mt-3 { margin-top: 0.75rem; }

  /* Output */
  .ex-output {
    font-family: var(--mono);
    font-size: 0.75rem;
    color: var(--blue);
    min-height: 1.4em;
    padding: 0.5rem 0.9rem;
    background: rgba(100,220,255,0.04);
    border-left: 2px solid rgba(100,220,255,0.25);
    border-radius: 0 8px 8px 0;
  }
  .ex-output.success { color: #4ade80; background: rgba(74,222,128,0.04); border-left-color: rgba(74,222,128,0.3); }
  .ex-output.error   { color: #f87171; background: rgba(248,113,113,0.04); border-left-color: rgba(248,113,113,0.3); }
  .ex-output:empty   { display: none; }

  /* Fruit grid */
  .fruit-grid { list-style: none; display: flex; flex-wrap: wrap; gap: 0.5rem; padding: 0; margin: 0; }
  .fruit-chip {
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 6px;
    padding: 0.22rem 0.65rem;
    font-family: var(--mono);
    font-size: 0.7rem;
    color: rgba(255,255,255,0.65);
    transition: opacity 0.15s, background 0.15s;
  }
  .fruit-chip:not(.hidden):hover { background: rgba(255,255,255,0.08); }
  .fruit-chip.hidden { display: none; }

  /* Action buttons */
  .action-btn {
    background: var(--accent);
    color: #080c14;
    border: none;
    border-radius: 8px;
    font-family: var(--mono);
    font-size: 0.75rem;
    font-weight: 500;
    padding: 0.5rem 1.1rem;
    cursor: pointer;
    transition: transform 0.15s, box-shadow 0.15s, filter 0.15s;
  }
  .action-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 16px -4px color-mix(in srgb, var(--accent) 50%, transparent);
    filter: brightness(1.08);
  }
  .action-btn:active { transform: translateY(0); }
  .ghost-btn {
    background: transparent;
    color: var(--text);
    border: 1px solid rgba(255,255,255,0.12);
  }
  .ghost-btn:hover {
    border-color: rgba(255,255,255,0.25);
    box-shadow: none;
    filter: none;
    background: rgba(255,255,255,0.04);
  }

  /* Key display */
  .key-display {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    background: rgba(0,0,0,0.3);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 10px;
    padding: 0.6rem 0.9rem;
  }
  .key-label {
    font-family: var(--mono);
    font-size: 0.6rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--muted);
  }
  .key-value {
    font-family: var(--mono);
    font-size: 1rem;
    color: var(--blue);
    font-weight: 500;
    min-width: 1ch;
  }

  /* Magic anchor */
  .magic-anchor {
    display: inline-flex;
    align-items: center;
    gap: 0.6rem;
    font-family: var(--mono);
    font-size: 0.75rem;
    color: var(--blue);
    text-decoration: none;
    background: rgba(100,220,255,0.06);
    border: 1px solid rgba(100,220,255,0.15);
    border-radius: 8px;
    padding: 0.5rem 0.9rem;
    transition: background 0.2s;
  }
  .magic-anchor:hover { background: rgba(100,220,255,0.1); }
  .anchor-pill {
    font-size: 0.58rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    background: rgba(255,80,80,0.15);
    color: #f87171;
    border: 1px solid rgba(255,80,80,0.2);
    border-radius: 4px;
    padding: 0.08rem 0.35rem;
  }

  /* Hover chip */
  .hover-chip {
    display: inline-block;
    background: var(--accent);
    color: #080c14;
    font-family: var(--mono);
    font-size: 0.78rem;
    padding: 0.55rem 1.1rem;
    border-radius: 10px;
    cursor: default;
    user-select: none;
    transition: color 0.2s, background 0.2s;
  }

  /* Form */
  .ex-form { display: flex; flex-direction: column; gap: 0.75rem; }
  .form-field { display: flex; flex-direction: column; gap: 0.25rem; }
  .form-label {
    font-family: var(--mono);
    font-size: 0.6rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--muted);
  }
  .submit-btn { align-self: flex-start; }

  /* Focus indicator */
  .focus-indicator {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-family: var(--mono);
    font-size: 0.72rem;
    color: rgba(255,255,255,0.25);
    transition: color 0.2s;
  }
  .focus-dot {
    width: 7px; height: 7px;
    border-radius: 50%;
    background: rgba(255,255,255,0.15);
    transition: background 0.2s, box-shadow 0.2s;
  }
  .focus-dot.active {
    background: var(--blue);
    box-shadow: 0 0 8px var(--blue);
  }

  /* Echo */
  .echo-box {
    background: rgba(0,0,0,0.3);
    border: 1px dashed rgba(255,255,255,0.07);
    border-radius: 10px;
    padding: 0.55rem 0.9rem;
    font-family: var(--mono);
    font-size: 0.78rem;
    color: var(--blue);
    min-height: 2.5rem;
    word-break: break-all;
    transition: border-color 0.2s;
  }
  .echo-box:not(:empty) { border-color: rgba(100,220,255,0.2); }
  .echo-box:empty::before {
    content: 'Tu texto aparecerá aquí…';
    color: rgba(255,255,255,0.12);
  }

  /* ── Animations ── */
  @keyframes fadeUp {
    from { opacity:0; transform: translateY(20px); }
    to   { opacity:1; transform: translateY(0);    }
  }
  @keyframes cardIn {
    from { opacity:0; transform: translateY(16px) scale(0.97); }
    to   { opacity:1; transform: translateY(0)    scale(1);    }
  }
</style>

<!-- ─────────────────────────── SCRIPT ─────────────────────────── -->
<script>
  const exercises = [
    { id: 11, title: 'Buscador en Tiempo Real',    category: 'Búsqueda'    },
    { id: 12, title: 'Cambiador de Texto',          category: 'Eventos'     },
    { id: 13, title: 'Tecla Presionada',            category: 'Teclado'     },
    { id: 14, title: 'Detector de Enter',           category: 'Teclado'     },
    { id: 15, title: 'Enlace con Prevención',       category: 'Eventos'     },
    { id: 16, title: 'Texto Interactivo',           category: 'Mouse'       },
    { id: 17, title: 'Formulario con Validación',   category: 'Formularios' },
    { id: 18, title: 'Detector de Doble Clic',      category: 'Mouse'       },
    { id: 19, title: 'Campo Enfocado',              category: 'Foco'        },
    { id: 20, title: 'Eco en Tiempo Real',          category: 'Input'       },
  ];

  const modal      = document.getElementById('modal')!;
  const modalNum   = document.getElementById('modal-number')!;
  const modalTitle = document.getElementById('modal-title')!;

  const categoryColors: Record<string, string> = {
    'Búsqueda':    '#64dcff',
    'Eventos':     '#e8ff47',
    'Teclado':     '#ff9f47',
    'Mouse':       '#c084fc',
    'Formularios': '#4ade80',
    'Foco':        '#fb7185',
    'Input':       '#38bdf8',
  };

  function openModal(id: number) {
    const ex = exercises.find(e => e.id === id);
    if (!ex) return;

    modalNum.textContent   = `#${String(id).padStart(2,'0')} · ${ex.category}`;
    modalNum.style.color   = categoryColors[ex.category] ?? '#64dcff';
    modalTitle.textContent = ex.title;

    document.querySelectorAll<HTMLElement>('.ex-panel').forEach(p => p.classList.add('hidden'));
    document.querySelector<HTMLElement>(`.ex-panel[data-ex="${id}"]`)?.classList.remove('hidden');

    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
  }

  function closeModal() {
    modal.classList.add('hidden');
    document.body.style.overflow = '';
  }

  document.querySelectorAll<HTMLElement>('.ex-card').forEach(card => {
    card.addEventListener('click', () => openModal(Number(card.dataset.id)));
  });

  document.getElementById('close-btn')!.addEventListener('click', closeModal);
  modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
  document.addEventListener('keydown', (e) => {
    if (!modal.classList.contains('hidden') && e.key === 'Escape') closeModal();
  });

  // ── 11: Buscador ──
  document.getElementById('fruit-input')!.addEventListener('input', (e) => {
    const q = (e.target as HTMLInputElement).value.toLowerCase();
    document.querySelectorAll<HTMLLIElement>('.fruit-chip').forEach(li => {
      li.classList.toggle('hidden', !li.textContent!.toLowerCase().includes(q));
    });
  });

  // ── 12: Toggle ──
  let toggled = false;
  const toggleBtn = document.getElementById('toggle-btn') as HTMLButtonElement;
  toggleBtn.addEventListener('click', () => {
    toggled = !toggled;
    toggleBtn.textContent = toggled ? '¡Has hecho clic!' : 'Haz clic aquí';
  });

  // ── 13: Tecla ──
  document.getElementById('key-input')!.addEventListener('keydown', (e) => {
    const kv = document.getElementById('key-value');
    if (kv) kv.textContent = (e as KeyboardEvent).key;
  });

  // ── 14: Enter ──
  const enterInput = document.getElementById('enter-input') as HTMLInputElement;
  enterInput.addEventListener('keydown', (e) => {
    if ((e as KeyboardEvent).key === 'Enter' && enterInput.value.trim()) {
      document.getElementById('enter-output')!.textContent = enterInput.value.trim();
      enterInput.value = '';
    }
  });

  // ── 15: Prevent link ──
  document.getElementById('magic-link')!.addEventListener('click', (e) => {
    e.preventDefault();
    document.getElementById('link-msg')!.textContent = 'Comportamiento predeterminado prevenido';
  });

  // ── 16: Hover text ──
  const hoverText = document.getElementById('hover-text') as HTMLElement;
  hoverText.addEventListener('mouseenter', () => {
    hoverText.style.background = '#ff4d4d';
    hoverText.style.color = '#fff';
  });
  hoverText.addEventListener('mouseleave', () => {
    hoverText.style.background = '';
    hoverText.style.color = '';
  });

  // ── 17: Form ──
  document.getElementById('contact-form')!.addEventListener('submit', (e) => {
    e.preventDefault();
    const name  = (document.getElementById('fname')  as HTMLInputElement).value.trim();
    const email = (document.getElementById('femail') as HTMLInputElement).value.trim();
    const msg   = document.getElementById('form-msg')!;
    if (name && email) {
      msg.textContent = '✓ Formulario enviado correctamente';
      msg.className = 'ex-output success';
    } else {
      msg.textContent = '✗ Por favor completa todos los campos';
      msg.className = 'ex-output error';
    }
  });

  // ── 18: Double click ──
  document.getElementById('dbl-btn')!.addEventListener('dblclick', () => {
    document.getElementById('dbl-msg')!.textContent = '⚡ ¡Doble clic detectado!';
  });

  // ── 19: Focus ──
  const focusInput = document.getElementById('focus-input') as HTMLInputElement;
  const focusDot   = document.getElementById('focus-dot') as HTMLElement;
  const focusMsg   = document.getElementById('focus-msg') as HTMLElement;
  const focusInd   = document.getElementById('focus-indicator') as HTMLElement;
  focusInput.addEventListener('focus', () => {
    focusMsg.textContent = 'Campo activo';
    focusInd.style.color = 'rgba(100,220,255,0.85)';
    focusDot.classList.add('active');
  });
  focusInput.addEventListener('blur', () => {
    focusMsg.textContent = 'Campo inactivo';
    focusInd.style.color = 'rgba(255,255,255,0.25)';
    focusDot.classList.remove('active');
  });

  // ── 20: Echo ──
  const echoInput = document.getElementById('echo-input') as HTMLInputElement;
  echoInput.addEventListener('input', () => {
    document.getElementById('echo-output')!.textContent = echoInput.value;
  });
</script>